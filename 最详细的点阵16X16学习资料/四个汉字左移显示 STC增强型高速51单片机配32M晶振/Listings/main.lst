C51 COMPILER V9.56.0.0   MAIN                                                              09/30/2016 20:20:43 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Program Files\keil MDK\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(
                    -.\Listings\main.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          //====================================================================================
   2          //1¡¢±¾³ÌÐòÊÊÓÃÓÚ£ºÓÉ¸ö595Çý¶¯µÄ16*16µãÕó¡£ÏÈ·¢16Î»Ñô¼«ÁÐÑ¡ÐÅºÅ¡£ÔÙ·¢ËÍÒõ¼«×Ö½ÚÄ£Êý¾Ý¡£
   3          //2¡¢±¾³ÌÐò£¬²¢Î´Ê¹ÓÃWQX-51±à³Ì¼¼ÇÉ£¬Îª·½±ã¹«¿ª£¬Ê¹ÓÃ´«Í³±à³ÌË¼Â·±àÐ´¡£
   4          //3¡¢½»Á÷·½Ê½£ºQQÈº318199961¡£ ÌÔ±¦Á¬½Ó£ºhttp://wqxdz.taobao.com
   5          //====================================================================================
   6          #include<STC12C5A60S2.H>
   7          #include<intrins.h>
   8          #define uchar unsigned char 
   9          #define uint unsigned int   
  10          sbit HC595_DS=P0^3;                                                                     //74HC595µÄÊý¾Ý
  11          sbit HC595_SCLK=P0^1;                                                           //74HC595µÄÊ±ÖÓ
  12          sbit HC595_LCLK=P0^0;                                                           //74HC595µÄËø´æ
  13          uchar code hanzi[10][32]=
  14          {
  15          //Îå½ÇÐÇ
  16                  {       0x00,0x00,0x04,0x00,0x06,0x02,0x07,0x0C,0x07,0xBC,0x07,0xF8,0x0F,0xF8,0x3F,0xF0,0xFF,0xE0,0x3F,0xF0,0x0
             -F,0xF8,0x07,0xF8,0x07,0xBC,0x07,0x0C,0x06,0x02,0x04,0x00              },
  17          //Æî
  18                  {       0x10,0x20,0x10,0x40,0x10,0x80,0x91,0x00,0x73,0xFF,0x15,0x00,0x18,0x80,0x00,0x00,0x7F,0xFF,0x40,0x10,0x4
             -2,0x08,0x4D,0x04,0x70,0x88,0x00,0x70,0x00,0x00,0x00,0x00              },
  19          //Ð÷
  20                  {       0x04,0x44,0x0C,0xC6,0x35,0x44,0xC6,0x48,0x0C,0x68,0x02,0x48,0x22,0x80,0x23,0xFF,0x22,0x92,0xFE,0x92,0x2
             -A,0x92,0x32,0x92,0x23,0xFF,0x46,0x80,0x02,0x00,0x00,0x00              },
  21          //µç
  22                  {       0x00,0x00,0x1F,0xE0,0x12,0x40,0x12,0x40,0x12,0x40,0x12,0x40,0xFF,0xFC,0x12,0x42,0x12,0x42,0x12,0x42,0x1
             -2,0x42,0x3F,0xE2,0x10,0x02,0x00,0x0E,0x00,0x00,0x00,0x00              },
  23          //×Ó
  24                  {       0x01,0x00,0x01,0x00,0x41,0x00,0x41,0x00,0x41,0x00,0x41,0x02,0x41,0x01,0x47,0xFE,0x45,0x00,0x49,0x00,0x5
             -1,0x00,0x61,0x00,0x01,0x00,0x03,0x00,0x01,0x00,0x00,0x00              },
  25          //ºÚÌÒ
  26                  {       0x00,0x00,0x03,0xC0,0x07,0xE0,0x0F,0xF0,0x1F,0xF0,0x3F,0xE1,0x7F,0xC3,0xFF,0xFF,0xFF,0xFF,0x7F,0xC3,0x
             -3F,0xE1,0x1F,0xF0,0x0F,0xF0,0x07,0xE0,0x03,0xC0,0x00,0x00             },
  27          //ºìÐÄ
  28                  {       0x00,0x00,0x07,0x80,0x0F,0xC0,0x1F,0xE0,0x1F,0xF0,0x1F,0xF8,0x0F,0xFC,0x07,0xFE,0x07,0xFE,0x0F,0xFC,0x1
             -F,0xF8,0x1F,0xF0,0x1F,0xE0,0x0F,0xC0,0x07,0x80,0x00,0x00              },
  29          //Ã·»¨
  30                  {       0x00,0x00,0x00,0xE0,0x01,0xF0,0x03,0xF8,0x33,0xF8,0x79,0xF1,0xFD,0xE3,0xFF,0xFF,0xFF,0xFF,0xFD,0xE3,0x
             -79,0xF1,0x33,0xF8,0x03,0xF8,0x01,0xF0,0x00,0xE0,0x00,0x00             },
  31          //·½Æ¬
  32                  {       0x00,0x00,0x01,0x00,0x03,0x80,0x07,0xC0,0x0F,0xE0,0x1F,0xF0,0x3F,0xF8,0x7F,0xFC,0xFF,0xFE,0x7F,0xFC,0x3
             -F,0xF8,0x1F,0xF0,0x0F,0xE0,0x07,0xC0,0x03,0x80,0x01,0x00              },
  33          //»¨µã          
  34                  {       0xAA,0xAA,0x55,0x55,0xAA,0xAA,0x55,0x55,0xAA,0xAA,0x55,0x55,0xAA,0xAA,0x55,0x55,0xAA,0xAA,0x55,0x55,0xA
             -A,0xAA,0x55,0x55,0xAA,0xAA,0x55,0x55,0xAA,0xAA,0x55,0x55              }
  35                  };
  36          uchar xdata Mould[8];                                                           //¿ØÖÆ¸ÃÁÐµÄÈ¡Ä£Öµ£¬µÍµçÆ½ÁÁµÆ£¬Ã¿¸öÄ£×é16ÐÐ£¬Õ¼2×Ö½Ú
  37          uchar xdata upright[8];                                                         //¿ØÖÆÄ³Ò»ÁÐ£¬¸ßµçÆ½ÁÁµÆ,Ã¿¸öÄ£×é16ÁÐ£¬Õ¼2×Ö½Ú
  38          uchar xdata LED2X64[130];                                                       //¿ª±Ù»º´æ¿Õ¼ä£¬±»¶¨Ê±Æ÷ËæÊ±µ÷ÓÃ¡£Ã¿ÁÐÁ½¸ö×Ö½Ú£¬¿ª·¢°å×Ü¹²64ÁÐ¡£¼Ó2¸öÒÆÎ»¡
             -£
  39          
  40          void Timer0_Init()                                                                      //¶¨Ê±Æ÷ÅäÖÃ£º16Î»¶¨Ê±Æ÷£¬1.25msÏÔÊ¾1ÁÐ£¬Ö¡ÂÊ50Ö¡¡£
  41          {
  42   1              TMOD&=0Xf0;
  43   1              TMOD|=0X01;
C51 COMPILER V9.56.0.0   MAIN                                                              09/30/2016 20:20:43 PAGE 2   

  44   1              TL0=0xfb;               
  45   1              TH0=0xf2;
  46   1              ET0=1;
  47   1              TR0=1;
  48   1              EA=1;
  49   1      }
  50          void HC595_Write()                                                                      //74HC595·¢ËÍÊý¾Ý¡£
  51          {
  52   1              uchar i,j;
  53   1              HC595_DS=1;
  54   1              HC595_SCLK=1;
  55   1              HC595_LCLK=0;
  56   1              for(j=4;j>0;j--)                                                                //4¿éµãÕóÄ£×é£¬Ã¿¸öÄ£×éÓÐ4Æ¬595Ð¾Æ¬¡£
  57   1              {
  58   2                      for(i=0;i<8;i++)                                                        //·¢ËÍ¸øÃ¿¸öÄ£×éµÄ U4 £¬¸ßµçÆ½ÕûÁÐ¿ÉÒÔÁÁ£¬µÍµçÆ½ÕûÁÐÃð¡£
  59   2                      {
  60   3                              HC595_SCLK=0;                                                   //Ê±ÖÓÀ­µÍ
  61   3                              HC595_DS=(upright[j*2-1]&0x80);                 //´Ó×îºóÒ»¸ö×Ö½Ú¿ªÊ¼£¬ÏÈ¸ßÎ»ºóµÍÎ»¡£
  62   3                              upright[j*2-1]<<=1;                                             //×Ö½Ú×óÒÆ
  63   3                              HC595_SCLK=1;                                                   //Ê±ÖÓÉÏÉýÑØ¿½±´
  64   3                      }
  65   2                      for(i=0;i<8;i++)                                                        //·¢ËÍ¸øÃ¿¸öÄ£×éµÄ U3 £¬¸ßµçÆ½ÕûÁÐ¿ÉÒÔÁÁ£¬µÍµçÆ½ÕûÁÐÃð¡£
  66   2                      {
  67   3                              HC595_SCLK=0;
  68   3                              HC595_DS=(upright[j*2-2]&0x80);  
  69   3                              upright[j*2-2]<<=1;
  70   3                              HC595_SCLK=1;
  71   3                      }
  72   2                      for(i=0;i<8;i++)                                                        //·¢ËÍ¸øÃ¿¸öÄ£×éµÄ U2 £¬µÍµçÆ½ÕûÐÐ¿ÉÒÔÁÁ£¬¸ßµçÆ½ÕûÐÐÈ«Ãð¡£
  73   2                      {
  74   3                              HC595_SCLK=0;
  75   3                              HC595_DS=(Mould[j*2-1]&0x80);  
  76   3                              Mould[j*2-1]<<=1;
  77   3                              HC595_SCLK=1;
  78   3                      }
  79   2                      for(i=0;i<8;i++)                                                        //·¢ËÍ¸øÃ¿¸öÄ£×éµÄ U1 £¬µÍµçÆ½ÕûÐÐ¿ÉÒÔÁÁ£¬¸ßµçÆ½ÕûÐÐÈ«Ãð¡£
  80   2                      {
  81   3                              HC595_SCLK=0;
  82   3                              HC595_DS=(Mould[j*2-2]&0x80);  
  83   3                              Mould[j*2-2]<<=1;
  84   3                              HC595_SCLK=1;
  85   3                      }
  86   2              }
  87   1              HC595_LCLK=1;                                                                   //Ëø´æÂö³åÐÅºÅ£¬ÉÏÉýÑØ¡£
  88   1              HC595_DS=1;                                                                             //ÑÓÊ±
  89   1              HC595_LCLK=0;                                                                   //Ëø´æÂö³åÐÅºÅ¸´Î»¡£
  90   1      }
  91          void Timer0_Routnie (void) interrupt 1                          //¶¨Ê±Æ÷ÖÐ¶Ï´¦Àí£¬1.25msÒ»´Î¡£
  92          {
  93   1              uchar i;        
  94   1              static uint kkk=0x0001;                                                 //ÓÃÓÚ16ÁÐÂÖÁ÷¿ØÖÆ
  95   1              TL0=0xfb;                                                                               //¶¨Ê±Æ÷¸³³õÊ¼Öµ1.25ms
  96   1              TH0=0xf2;                                                                               //¶¨Ê±Æ÷¸³³õÊ¼Öµ1.25ms
  97   1              
  98   1              Mould[7]=~LED2X64[i+97];                                                //i=0,°Ñ»º´æµÄµÚ97ºÅ×Ö½Ú·¢ËÍµ½µÚËÄ¸öÄ£×éµÄ×î×ó±ßµÄÏÂ8Î»¡£
  99   1              Mould[6]=~LED2X64[i+96];                                                //i=0,°Ñ»º´æµÄµÚ96ºÅ×Ö½Ú·¢ËÍµ½µÚËÄ¸öÄ£×éµÄ×î×ó±ßµÄÉÏ8Î»¡£
 100   1              Mould[5]=~LED2X64[i+65];                                                //i=0,°Ñ»º´æµÄµÚ65ºÅ×Ö½Ú·¢ËÍµ½µÚÈý¸öÄ£×éµÄ×î×ó±ßµÄÏÂ8Î»¡£       
 101   1              Mould[4]=~LED2X64[i+64];                                                //i=0,°Ñ»º´æµÄµÚ64ºÅ×Ö½Ú·¢ËÍµ½µÚÈý¸öÄ£×éµÄ×î×ó±ßµÄÉÏ8Î»¡£
 102   1              Mould[3]=~LED2X64[i+33];                                                //i=0,°Ñ»º´æµÄµÚ33ºÅ×Ö½Ú·¢ËÍµ½µÚ¶þ¸öÄ£×éµÄ×î×ó±ßµÄÏÂ8Î»¡£
 103   1              Mould[2]=~LED2X64[i+32];                                                //i=0,°Ñ»º´æµÄµÚ32ºÅ×Ö½Ú·¢ËÍµ½µÚ¶þ¸öÄ£×éµÄ×î×ó±ßµÄÉÏ8Î»¡£
 104   1              Mould[1]=~LED2X64[i+1];                                                 //i=0,°Ñ»º´æµÄµÚ01ºÅ×Ö½Ú·¢ËÍµ½µÚÒ»¸öÄ£×éµÄ×î×ó±ßµÄÏÂ8Î»¡£
 105   1              Mould[0]=~LED2X64[i+0];                                                 //i=0,°Ñ»º´æµÄµÚ00ºÅ×Ö½Ú·¢ËÍµ½µÚÒ»¸öÄ£×éµÄ×î×ó±ßµÄÉÏ8Î»¡£
C51 COMPILER V9.56.0.0   MAIN                                                              09/30/2016 20:20:43 PAGE 3   

 106   1              
 107   1              upright[7]=kkk/256;                                                             //16Î»±äÁ¿KKK£¬È¡¸ß8Î»¡£¿ØÖÆµÚËÄ¸öÄ£×éµÄ0~7ÁÐ¡£
 108   1              upright[6]=kkk%256;                                                             //16Î»±äÁ¿KKK£¬È¡µÍ8Î»¡£¿ØÖÆµÚËÄ¸öÄ£×éµÄ8~15ÁÐ¡£
 109   1              upright[5]=kkk/256;                                                             //16Î»±äÁ¿KKK£¬È¡¸ß8Î»¡£¿ØÖÆµÚÈý¸öÄ£×éµÄ0~7ÁÐ¡£
 110   1              upright[4]=kkk%256;                                                             //16Î»±äÁ¿KKK£¬È¡µÍ8Î»¡£¿ØÖÆµÚÈý¸öÄ£×éµÄ8~15ÁÐ¡£
 111   1              upright[3]=kkk/256;                                                             //16Î»±äÁ¿KKK£¬È¡¸ß8Î»¡£¿ØÖÆµÚ¶þ¸öÄ£×éµÄ0~7ÁÐ¡£
 112   1              upright[2]=kkk%256;                                                             //16Î»±äÁ¿KKK£¬È¡µÍ8Î»¡£¿ØÖÆµÚ¶þ¸öÄ£×éµÄ8~15ÁÐ¡£
 113   1              upright[1]=kkk/256;                                                             //16Î»±äÁ¿KKK£¬È¡¸ß8Î»¡£¿ØÖÆµÚÒ»¸öÄ£×éµÄ0~7ÁÐ¡£
 114   1              upright[0]=kkk%256;                                                             //16Î»±äÁ¿KKK£¬È¡µÍ8Î»¡£¿ØÖÆµÚÒ»¸öÄ£×éµÄ8~15ÁÐ¡£
 115   1              
 116   1              kkk=_irol_(kkk,1);                                                              //Ñ­»·¿ØÖÆ0~16ÁÐ
 117   1              i++;i++;
 118   1              i=i%32;
 119   1              HC595_Write();                                                                  //595µÄ»º´æMould[8]¡¢upright[8]£¬µÃµ½Êý¾Ýºó£¬Á¢Âí·¢ËÍµ½Ð¾Æ¬
 120   1      }
 121          
 122          void main()                                                                                     //Ö÷º¯Êý
 123          {
 124   1              uchar k=0,num=0,ww=0;
 125   1              uint timer=50000;
 126   1              Timer0_Init();
 127   1              for(k=0;k<128;k++)
 128   1              {
 129   2                      LED2X64[k]=0;
 130   2              }
 131   1              while(1)                                                                                //´óÑ­»·
 132   1              {
 133   2                      timer=50000;                                                            
 134   2                      while(timer--);                                                         //ÑÓÊ±£¬¿ÉÒÔ¸ÉÆäËûÊÂÇé
 135   2                      
 136   2                      LED2X64[128]=hanzi[ww][num];                            //°ÑÒªÏÔÊ¾µÄÄÚÈÝ·Åµ½×îÓÒ±ß£¬ÉÏ°ËÎ»¡£
 137   2                      num++;
 138   2                      LED2X64[129]=hanzi[ww][num];                            //°ÑÒªÏÔÊ¾µÄÄÚÈÝ·Åµ½×îÓÒ±ß£¬ÏÂ°ËÎ»¡£
 139   2                      num++;
 140   2                      if(num>=32)                                                                     //Ã¿¸ö×Ö×î¶à0~31¸ö×Ö½ÚµÄÄ£¡£
 141   2                      {
 142   3                              num=0;
 143   3                              ww++;                                                                   //¾ö¶¨ÁË Ö¸ÏòÃ¿¸öºº×ÖµÄÊý×é
 144   3                              if(ww>=10)                                                              //×Ü¹²10¸öºº×Ö£¨Ó¢ÎÄ¶¼Ëã16*16).
 145   3                              {
 146   4                                      ww=0;
 147   4                              }
 148   3                      }
 149   2                      for(k=0;k<128;k++)                                                      //°ÑÊý×é2×Ö½ÚµÄÄÚÈÝ¿½±´¸ø0×Ö½Ú£¬ÔÙ°Ñ4¿½±´¸ø2£¬ÒÔ´ËÀàÍÆ¡£
 150   2                      {                                                                                       //°ÑÊý×é3×Ö½ÚµÄÄÚÈÝ¿½±´¸ø1×Ö½Ú£¬ÔÙ°Ñ5¿½±´¸ø3£¬ÒÔ´ËÀàÍÆ¡£
 151   3                              LED2X64[k]=LED2X64[k+2];
 152   3                      }
 153   2              }
 154   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    631    ----
   CONSTANT SIZE    =    320    ----
   XDATA SIZE       =    146    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
