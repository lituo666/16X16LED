C51 COMPILER V9.01   MAIN                                                                  11/10/2017 22:37:50 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main.lst) OBJECT(.\Object
                    -s\main.obj)

line level    source

   1          //====================================================================================
   2          //1¡¢±¾³ÌÐòÊÊÓÃÓÚ£ºÓÉ¸ö595Çý¶¯µÄ16*16µãÕó¡£ÏÈ·¢16Î»Ñô¼«ÁÐÑ¡ÐÅºÅ¡£ÔÙ·¢ËÍÒõ¼«×Ö½ÚÄ£Êý¾Ý¡£
   3          //2¡¢±¾³ÌÐò£¬²¢Î´Ê¹ÓÃWQX-51±à³Ì¼¼ÇÉ£¬Îª·½±ã¹«¿ª£¬Ê¹ÓÃ´«Í³±à³ÌË¼Â·±àÐ´¡£
   4          //3¡¢ ¿ÉÒÔÖ±½ÓÊ¹ÓÃ´«Í³51Åä12M¾§Õñ¡£
   5          //4¡¢½»Á÷·½Ê½£ºQQÈº318199961¡£ ÌÔ±¦Á¬½Ó£ºhttp://wqxdz.taobao.com
   6          //====================================================================================
   7          #include<STC12C5A60S2.H>
   8          #include<intrins.h>
   9          #define uchar unsigned char 
  10          #define uint unsigned int   
  11          sbit HC595_DS=P0^3;                                                                     //74HC595µÄÊý¾Ý
  12          sbit HC595_SCLK=P0^1;                                                           //74HC595µÄÊ±ÖÓ
  13          sbit HC595_LCLK=P0^0;                                                           //74HC595µÄËø´æ
  14          uchar code hanzi[10][32]=
  15          {
  16          //Îå½ÇÐÇ
  17                  {       0x00,0x00,0x04,0x00,0x06,0x02,0x07,0x0C,0x07,0xBC,0x07,0xF8,0x0F,0xF8,0x3F,0xF0,0xFF,0xE0,0x3F,0xF0,0x0
             -F,0xF8,0x07,0xF8,0x07,0xBC,0x07,0x0C,0x06,0x02,0x04,0x00              },
  18          //Æî
  19                  {       0x10,0x20,0x10,0x40,0x10,0x80,0x91,0x00,0x73,0xFF,0x15,0x00,0x18,0x80,0x00,0x00,0x7F,0xFF,0x40,0x10,0x4
             -2,0x08,0x4D,0x04,0x70,0x88,0x00,0x70,0x00,0x00,0x00,0x00              },
  20          //Ð÷
  21                  {       0x04,0x44,0x0C,0xC6,0x35,0x44,0xC6,0x48,0x0C,0x68,0x02,0x48,0x22,0x80,0x23,0xFF,0x22,0x92,0xFE,0x92,0x2
             -A,0x92,0x32,0x92,0x23,0xFF,0x46,0x80,0x02,0x00,0x00,0x00              },
  22          //µç
  23                  {       0x00,0x00,0x1F,0xE0,0x12,0x40,0x12,0x40,0x12,0x40,0x12,0x40,0xFF,0xFC,0x12,0x42,0x12,0x42,0x12,0x42,0x1
             -2,0x42,0x3F,0xE2,0x10,0x02,0x00,0x0E,0x00,0x00,0x00,0x00              },
  24          //×Ó
  25                  {       0x01,0x00,0x01,0x00,0x41,0x00,0x41,0x00,0x41,0x00,0x41,0x02,0x41,0x01,0x47,0xFE,0x45,0x00,0x49,0x00,0x5
             -1,0x00,0x61,0x00,0x01,0x00,0x03,0x00,0x01,0x00,0x00,0x00              },
  26          //ºÚÌÒ
  27                  {       0x00,0x00,0x03,0xC0,0x07,0xE0,0x0F,0xF0,0x1F,0xF0,0x3F,0xE1,0x7F,0xC3,0xFF,0xFF,0xFF,0xFF,0x7F,0xC3,0x
             -3F,0xE1,0x1F,0xF0,0x0F,0xF0,0x07,0xE0,0x03,0xC0,0x00,0x00             },
  28          //ºìÐÄ
  29                  {       0x00,0x00,0x07,0x80,0x0F,0xC0,0x1F,0xE0,0x1F,0xF0,0x1F,0xF8,0x0F,0xFC,0x07,0xFE,0x07,0xFE,0x0F,0xFC,0x1
             -F,0xF8,0x1F,0xF0,0x1F,0xE0,0x0F,0xC0,0x07,0x80,0x00,0x00              },
  30          //Ã·»¨
  31                  {       0x00,0x00,0x00,0xE0,0x01,0xF0,0x03,0xF8,0x33,0xF8,0x79,0xF1,0xFD,0xE3,0xFF,0xFF,0xFF,0xFF,0xFD,0xE3,0x
             -79,0xF1,0x33,0xF8,0x03,0xF8,0x01,0xF0,0x00,0xE0,0x00,0x00             },
  32          //·½Æ¬
  33                  {       0x00,0x00,0x01,0x00,0x03,0x80,0x07,0xC0,0x0F,0xE0,0x1F,0xF0,0x3F,0xF8,0x7F,0xFC,0xFF,0xFE,0x7F,0xFC,0x3
             -F,0xF8,0x1F,0xF0,0x0F,0xE0,0x07,0xC0,0x03,0x80,0x01,0x00              },
  34          //»¨µã          
  35                  {       0xAA,0xAA,0x55,0x55,0xAA,0xAA,0x55,0x55,0xAA,0xAA,0x55,0x55,0xAA,0xAA,0x55,0x55,0xAA,0xAA,0x55,0x55,0xA
             -A,0xAA,0x55,0x55,0xAA,0xAA,0x55,0x55,0xAA,0xAA,0x55,0x55              }
  36                  };
  37          uchar xdata Mould[8];                                                           //¿ØÖÆ¸ÃÁÐµÄÈ¡Ä£Öµ£¬µÍµçÆ½ÁÁµÆ£¬Ã¿¸öÄ£×é16ÐÐ£¬Õ¼2×Ö½Ú
  38          uchar xdata upright[8];                                                         //¿ØÖÆÄ³Ò»ÁÐ£¬¸ßµçÆ½ÁÁµÆ,Ã¿¸öÄ£×é16ÁÐ£¬Õ¼2×Ö½Ú
  39          uchar xdata LED2X64[130];                                                       //¿ª±Ù»º´æ¿Õ¼ä£¬±»¶¨Ê±Æ÷ËæÊ±µ÷ÓÃ¡£Ã¿ÁÐÁ½¸ö×Ö½Ú£¬¿ª·¢°å×Ü¹²64ÁÐ¡£¼Ó2¸öÒÆÎ»¡
             -£
  40          
  41          void Timer0_Init()                                                                      //¶¨Ê±Æ÷ÅäÖÃ£º16Î»¶¨Ê±Æ÷£¬1.25msÏÔÊ¾1ÁÐ£¬Ö¡ÂÊ50Ö¡¡£
  42          {
  43   1              TMOD&=0Xf0;
C51 COMPILER V9.01   MAIN                                                                  11/10/2017 22:37:50 PAGE 2   

  44   1              TMOD|=0X01;
  45   1              //TL0=0xfb;                                                                             //???????1.25ms,STC??1T???51????
  46   1              //TH0=0xf2;                                                                             //???????1.25ms,STC??1T???51????
  47   1              TL0=0x1E;                                                                               //???????1.25ms,??12T?????8951????
  48   1              TH0=0xFB;                                                                               //???????1.25ms,??12T?????8951????              
  49   1              ET0=1;
  50   1              TR0=1;
  51   1              EA=1;
  52   1      }
  53          void HC595_Write()                                                                      //74HC595·¢ËÍÊý¾Ý¡£
  54          {
  55   1              uchar i,j;
  56   1              HC595_DS=1;
  57   1              HC595_SCLK=1;
  58   1              HC595_LCLK=0;
  59   1              for(j=4;j>0;j--)                                                                //4¿éµãÕóÄ£×é£¬Ã¿¸öÄ£×éÓÐ4Æ¬595Ð¾Æ¬¡£
  60   1              {
  61   2                      for(i=0;i<8;i++)                                                        //·¢ËÍ¸øÃ¿¸öÄ£×éµÄ U4 £¬¸ßµçÆ½ÕûÁÐ¿ÉÒÔÁÁ£¬µÍµçÆ½ÕûÁÐÃð¡£
  62   2                      {
  63   3                              HC595_SCLK=0;                                                   //Ê±ÖÓÀ­µÍ
  64   3                              HC595_DS=(upright[j*2-1]&0x80);                 //´Ó×îºóÒ»¸ö×Ö½Ú¿ªÊ¼£¬ÏÈ¸ßÎ»ºóµÍÎ»¡£
  65   3                              upright[j*2-1]<<=1;                                             //×Ö½Ú×óÒÆ
  66   3                              HC595_SCLK=1;                                                   //Ê±ÖÓÉÏÉýÑØ¿½±´
  67   3                      }
  68   2                      for(i=0;i<8;i++)                                                        //·¢ËÍ¸øÃ¿¸öÄ£×éµÄ U3 £¬¸ßµçÆ½ÕûÁÐ¿ÉÒÔÁÁ£¬µÍµçÆ½ÕûÁÐÃð¡£
  69   2                      {
  70   3                              HC595_SCLK=0;
  71   3                              HC595_DS=(upright[j*2-2]&0x80);  
  72   3                              upright[j*2-2]<<=1;
  73   3                              HC595_SCLK=1;
  74   3                      }
  75   2                      for(i=0;i<8;i++)                                                        //·¢ËÍ¸øÃ¿¸öÄ£×éµÄ U2 £¬µÍµçÆ½ÕûÐÐ¿ÉÒÔÁÁ£¬¸ßµçÆ½ÕûÐÐÈ«Ãð¡£
  76   2                      {
  77   3                              HC595_SCLK=0;
  78   3                              HC595_DS=(Mould[j*2-1]&0x80);  
  79   3                              Mould[j*2-1]<<=1;
  80   3                              HC595_SCLK=1;
  81   3                      }
  82   2                      for(i=0;i<8;i++)                                                        //·¢ËÍ¸øÃ¿¸öÄ£×éµÄ U1 £¬µÍµçÆ½ÕûÐÐ¿ÉÒÔÁÁ£¬¸ßµçÆ½ÕûÐÐÈ«Ãð¡£
  83   2                      {
  84   3                              HC595_SCLK=0;
  85   3                              HC595_DS=(Mould[j*2-2]&0x80);  
  86   3                              Mould[j*2-2]<<=1;
  87   3                              HC595_SCLK=1;
  88   3                      }
  89   2              }
  90   1              HC595_LCLK=1;                                                                   //Ëø´æÂö³åÐÅºÅ£¬ÉÏÉýÑØ¡£
  91   1              HC595_DS=1;                                                                             //ÑÓÊ±
  92   1              HC595_LCLK=0;                                                                   //Ëø´æÂö³åÐÅºÅ¸´Î»¡£
  93   1      }
  94          void Timer0_Routnie (void) interrupt 1                          //¶¨Ê±Æ÷ÖÐ¶Ï´¦Àí£¬1.25msÒ»´Î¡£
  95          {
  96   1              uchar i;        
  97   1              static uint kkk=0x0001;                                                 //ÓÃÓÚ16ÁÐÂÖÁ÷¿ØÖÆ
  98   1              //TL0=0xfb;                                                                             //???????1.25ms,STC??1T???51????
  99   1              //TH0=0xf2;                                                                             //???????1.25ms,STC??1T???51????
 100   1              TL0=0x1E;                                                                               //???????1.25ms,??12T?????8951????
 101   1              TH0=0xFB;                                                                               //???????1.25ms,??12T?????8951????
 102   1              
 103   1              Mould[7]=~LED2X64[i+97];                                                //i=0,°Ñ»º´æµÄµÚ97ºÅ×Ö½Ú·¢ËÍµ½µÚËÄ¸öÄ£×éµÄ×î×ó±ßµÄÏÂ8Î»¡£
 104   1              Mould[6]=~LED2X64[i+96];                                                //i=0,°Ñ»º´æµÄµÚ96ºÅ×Ö½Ú·¢ËÍµ½µÚËÄ¸öÄ£×éµÄ×î×ó±ßµÄÉÏ8Î»¡£
 105   1              Mould[5]=~LED2X64[i+65];                                                //i=0,°Ñ»º´æµÄµÚ65ºÅ×Ö½Ú·¢ËÍµ½µÚÈý¸öÄ£×éµÄ×î×ó±ßµÄÏÂ8Î»¡£       
C51 COMPILER V9.01   MAIN                                                                  11/10/2017 22:37:50 PAGE 3   

 106   1              Mould[4]=~LED2X64[i+64];                                                //i=0,°Ñ»º´æµÄµÚ64ºÅ×Ö½Ú·¢ËÍµ½µÚÈý¸öÄ£×éµÄ×î×ó±ßµÄÉÏ8Î»¡£
 107   1              Mould[3]=~LED2X64[i+33];                                                //i=0,°Ñ»º´æµÄµÚ33ºÅ×Ö½Ú·¢ËÍµ½µÚ¶þ¸öÄ£×éµÄ×î×ó±ßµÄÏÂ8Î»¡£
 108   1              Mould[2]=~LED2X64[i+32];                                                //i=0,°Ñ»º´æµÄµÚ32ºÅ×Ö½Ú·¢ËÍµ½µÚ¶þ¸öÄ£×éµÄ×î×ó±ßµÄÉÏ8Î»¡£
 109   1              Mould[1]=~LED2X64[i+1];                                                 //i=0,°Ñ»º´æµÄµÚ01ºÅ×Ö½Ú·¢ËÍµ½µÚÒ»¸öÄ£×éµÄ×î×ó±ßµÄÏÂ8Î»¡£
 110   1              Mould[0]=~LED2X64[i+0];                                                 //i=0,°Ñ»º´æµÄµÚ00ºÅ×Ö½Ú·¢ËÍµ½µÚÒ»¸öÄ£×éµÄ×î×ó±ßµÄÉÏ8Î»¡£
 111   1              
 112   1              upright[7]=kkk/256;                                                             //16Î»±äÁ¿KKK£¬È¡¸ß8Î»¡£¿ØÖÆµÚËÄ¸öÄ£×éµÄ0~7ÁÐ¡£
 113   1              upright[6]=kkk%256;                                                             //16Î»±äÁ¿KKK£¬È¡µÍ8Î»¡£¿ØÖÆµÚËÄ¸öÄ£×éµÄ8~15ÁÐ¡£
 114   1              upright[5]=kkk/256;                                                             //16Î»±äÁ¿KKK£¬È¡¸ß8Î»¡£¿ØÖÆµÚÈý¸öÄ£×éµÄ0~7ÁÐ¡£
 115   1              upright[4]=kkk%256;                                                             //16Î»±äÁ¿KKK£¬È¡µÍ8Î»¡£¿ØÖÆµÚÈý¸öÄ£×éµÄ8~15ÁÐ¡£
 116   1              upright[3]=kkk/256;                                                             //16Î»±äÁ¿KKK£¬È¡¸ß8Î»¡£¿ØÖÆµÚ¶þ¸öÄ£×éµÄ0~7ÁÐ¡£
 117   1              upright[2]=kkk%256;                                                             //16Î»±äÁ¿KKK£¬È¡µÍ8Î»¡£¿ØÖÆµÚ¶þ¸öÄ£×éµÄ8~15ÁÐ¡£
 118   1              upright[1]=kkk/256;                                                             //16Î»±äÁ¿KKK£¬È¡¸ß8Î»¡£¿ØÖÆµÚÒ»¸öÄ£×éµÄ0~7ÁÐ¡£
 119   1              upright[0]=kkk%256;                                                             //16Î»±äÁ¿KKK£¬È¡µÍ8Î»¡£¿ØÖÆµÚÒ»¸öÄ£×éµÄ8~15ÁÐ¡£
 120   1              
 121   1              kkk=_irol_(kkk,1);                                                              //Ñ­»·¿ØÖÆ0~16ÁÐ
 122   1              i++;i++;
 123   1              i=i%32;
 124   1              HC595_Write();                                                                  //595µÄ»º´æMould[8]¡¢upright[8]£¬µÃµ½Êý¾Ýºó£¬Á¢Âí·¢ËÍµ½Ð¾Æ¬
 125   1      }
 126          
 127          void main()                                                                                     //Ö÷º¯Êý
 128          {
 129   1              uchar k=0,num=0,ww=0;
 130   1              uint timer=50000;
 131   1              Timer0_Init();
 132   1              for(k=0;k<128;k++)
 133   1              {
 134   2                      LED2X64[k]=hanzi[k/32+1][k%32];                         //°ÑÒªÏÔÊ¾µÄÄÚÈÝÐ´Èë»º´æ
 135   2              }
 136   1              while(1)                                                                                //´óÑ­»·
 137   1              {
 138   2                      
 139   2              }
 140   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    541    ----
   CONSTANT SIZE    =    320    ----
   XDATA SIZE       =    146    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2       5
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
